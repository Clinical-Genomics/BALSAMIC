cluster: "sbatch --account {config[account]} --qos {config[qos]} --time={resources.runtime} --mem={resources.mem_mb}M --cpus-per-task={threads} --error {config[analysis][log]}/BALSAMIC.{config[analysis][case_id]}.{rulename}.%j.err --output {config[analysis][log]}/BALSAMIC.{config[analysis][case_id]}.{rulename}.%j.out"
jobs: 999
default-resources:
    - runtime=120
    - mem_mb=4000
    - threads=2
restart-times: 1
max-status-checks-per-second: 10
local-cores: 1

set-threads:
    samtools_qc_umi_collapsed: 16
    samtools_qc_wgs: 16
    samtools_qc_tga: 16
    sambamba_exon_depth: 8
    sambamba_panel_depth: 8
    cnv_report: 1
    collect_custom_qc_metrics: 1
    picard_CollectHsMetrics_WGS: 8
    picard_CollectAlignmentSummaryMetrics: 8
    picard_CollectHsMetrics: 8
    multiqc: 4
    mosdepth_coverage: 12
    gatk_create_readcount_pon: 86
    create_reference: 8
    dragen_align_call_tumor_only: 36
    concatenate_fastqs: 1
    vcfheader_rename_germline: 4
    vcf2cytosure_convert_tumor_normal: 8
    vcf2cytosure_convert_tumor_only: 8
    vcf2cytosure_convert: 8
    bcftools_filter_sv_clinical: 8
    bcftools_filter_sv_research: 8
    bcftools_filter_tnscope_clinical_tumor_only: 8
    bcftools_filter_tnscope_research_tumor_only: 8
    bcftools_filter_TNscope_umi_clinical_tumor_only: 4
    bcftools_filter_TNscope_umi_research_tumor_only: 4
    bcftools_filter_merged_clinical_tumor_only: 8
    bcftools_filter_merged_research_tumor_only: 8
    bcftools_filter_tnscope_clinical_tumor_normal: 8
    bcftools_filter_tnscope_research_tumor_normal: 8
    bcftools_filter_TNscope_umi_clinical_tumor_normal: 4
    bcftools_filter_TNscope_umi_research_tumor_normal: 4
    bcftools_filter_merged_clinical_tumor_normal: 8
    bcftools_filter_merged_research_tumor_normal: 8
    svdb_annotate_clinical_obs_somatic_clinical_sv: 8
    svdb_annotate_somatic_research_sv: 36
    vep_somatic_research_sv: 36
    vcfanno_annotate_somaticSNV_clinical: 12
    vep_annotate_somaticSNV_research: 12
    bcftools_annotate_somaticINDEL_research: 4
    cadd_annotate_somaticINDEL_research: 4
    bcftools_get_somaticINDEL_research: 4
    tmb_calculation: 4
    genmod_score_snvs: 8
    msisensorpro_msi_tumor_normal: 24
    msisensorpro_scan_reference: 1
    vep_annotate_germlineVAR_normal: 10
    vep_annotate_germlineVAR_tumor: 10
    create_final_vcf_namemap: 1
    sentieon_align_sort: 12
    sentieon_align_sort_umireads: 12
    cap_base_quality: 10
    sentieon_dedup: 36
    sentieon_realign: 36
    sentieon_dedup_consensus: 36
    sentieon_base_calibration: 36
    samtools_fixmate: 16
    bam_compress_tumor: 20
    bam_compress_normal: 20
    fastqc: 4
    fastp_adapter_trim_tga: 4
    fastp_quality_trim_tga: 8
    fastp_quality_and_adapter_trim_wgs: 12
    sentieon_umiextract_tga: 8
    purecn_call_CNV_research: 10
    bedtools_pad_bedfile: 1
    vardict_sort: 2
    gatk_update_vcf_sequence_dictionary: 5

set-resources:
    samtools_qc_umi_collapsed:
        runtime: 280
        mem: 16000
    samtools_qc_tga:
        runtime: 280
        mem: 16000
    samtools_qc_wgs:
        runtime: 280
        mem: 30000
    sambamba_exon_depth:
        runtime: 150
        mem: 16000
    sambamba_panel_depth:
        runtime: 150
        mem: 16000
    cnv_report:
        runtime: 20
        mem: 100
    collect_custom_qc_metrics:
        runtime: 20
        mem: 100
    picard_CollectHsMetrics_WGS:
        runtime: 360
        mem: 16000
    picard_CollectAlignmentSummaryMetrics:
        runtime: 360
        mem: 15000
    picard_CollectHsMetrics:
        runtime: 360
        mem: 15000
    multiqc:
        runtime: 60
        mem: 10000
    mosdepth_coverage:
        runtime: 280
        mem: 12000
    gatk_create_readcount_pon:
        runtime: 3600
        mem: 170000
    create_reference:
        runtime: 120
        mem: 15000
    dragen_align_call_tumor_only:
        runtime: 1200
        mem: 120000
        partition: "dragen"
    concatenate_fastqs:
        runtime: 60
        mem: 20000
    vcfheader_rename_germline:
        runtime: 120
        mem: 1000
    vcf2cytosure_convert_tumor_normal:
        runtime: 120
        mem: 10000
    vcf2cytosure_convert_tumor_only:
        runtime: 120
        mem: 10000
    vcf2cytosure_convert:
        runtime: 120
        mem: 10000
    bcftools_filter_sv_research:
        runtime: 120
        mem: 10000
    bcftools_filter_sv_clinical:
        runtime: 120
        mem: 10000
    bcftools_filter_tnscope_clinical_tumor_only:
        runtime: 280
        mem: 30000
    bcftools_filter_tnscope_research_tumor_only:
        runtime: 280
        mem: 30000
    bcftools_filter_TNscope_umi_clinical_tumor_only:
        runtime: 280
        mem: 5000
    bcftools_filter_TNscope_umi_research_tumor_only:
        runtime: 280
        mem: 5000
    bcftools_filter_merged_clinical_tumor_only:
        runtime: 280
        mem: 15000
    bcftools_filter_merged_research_tumor_only:
        runtime: 280
        mem: 15000
    bcftools_filter_tnscope_clinical_tumor_normal:
        runtime: 280
        mem: 10000
    bcftools_filter_tnscope_research_tumor_normal:
        runtime: 280
        mem: 10000
    bcftools_filter_TNscope_umi_clinical_tumor_normal:
        runtime: 280
        mem: 5000
    bcftools_filter_TNscope_umi_research_tumor_normal:
        runtime: 280
        mem: 5000
    bcftools_filter_merged_clinical_tumor_normal:
        runtime: 280
        mem: 10000
    bcftools_filter_merged_research_tumor_normal:
        runtime: 280
        mem: 10000
    svdb_annotate_clinical_obs_somatic_clinical_sv:
        runtime: 600
        mem: 25000
    svdb_annotate_somatic_research_sv:
        runtime: 720
        mem: 25000
    vep_somatic_research_sv:
        runtime: 720
        mem: 90000
    vcfanno_annotate_somaticSNV_clinical:
        runtime: 1080
        mem: 50000
    vep_annotate_somaticSNV_research:
        runtime: 1080
        mem: 50000
    bcftools_annotate_somaticINDEL_research:
        runtime: 60
        mem: 5000
    cadd_annotate_somaticINDEL_research:
        runtime: 1080
        mem: 5000
    bcftools_get_somaticINDEL_research:
        runtime: 60
        mem: 5000
    tmb_calculation:
        runtime: 280
        mem: 5000
    genmod_score_snvs:
        runtime: 280
        mem: 5000
    msisensorpro_msi_tumor_normal:
        runtime: 280
        mem: 10000
    msisensorpro_scan_reference:
        runtime: 280
        mem: 1000
    vep_annotate_germlineVAR_normal:
        runtime: 360
        mem: 20000
    vep_annotate_germlineVAR_tumor:
        runtime: 360
        mem: 20000
    create_final_vcf_namemap:
        runtime: 10
        mem: 100
    sentieon_align_sort:
        mem: 20000
        runtime: 1440
    sentieon_align_sort_umireads:
        mem: 20000
        runtime: 1440
    cap_base_quality:
        mem: 20000
        runtime: 300
    sentieon_dedup:
        mem: 40000
        runtime: 1440
    sentieon_realign:
        mem: 40000
        runtime: 1440
    sentieon_dedup_consensus:
        mem: 15000
        runtime: 1440
    sentieon_base_calibration:
        mem: 40000
        runtime: 1440
    samtools_fixmate:
        mem: 60000
        runtime: 270
    bam_compress_tumor:
        mem: 20000
        runtime: 280
    bam_compress_normal:
        mem: 20000
        runtime: 280
    fastqc:
        mem: 8000
        runtime: 280
    fastp_quality_and_adapter_trim_wgs:
        mem: 15000
        runtime: 350
    fastp_adapter_trim_tga:
        mem: 20000
        runtime: 400
    fastp_quality_trim_tga:
        mem: 15000
        runtime: 350
    sentieon_umiextract_tga:
        mem: 15000
        runtime: 350
    purecn_call_CNV_research:
        mem: 20000
    bedtools_pad_bedfile:
        mem: 1000
    vardict_sort:
        mem: 20000
    gatk_update_vcf_sequence_dictionary:
        runtime: 600
        mem: 20000