<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Semantic versioning" href="semver.html" /><link rel="prev" title="Documentation Guidline" href="README.html" />

    <!-- Generated with Sphinx 6.2.1 and Furo 2023.07.26 -->
        <title>Coding etiquettes - BALSAMIC documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=369552022d0b975c8e74270ce6eabe0fb7978f24" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">BALSAMIC  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/balsamic_logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">BALSAMIC  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Installation and Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">Short tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_package.html">Command line arguments</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analysis and Interpretation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="balsamic_filters.html">Calling and filtering variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="balsamic_sv_cnv.html">Structural and Copy Number variants</a></li>
<li class="toctree-l1"><a class="reference internal" href="balsamic_annotation.html">Annotation resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="balsamic_pon.html">Panel of Normals (PON)</a></li>
<li class="toctree-l1"><a class="reference internal" href="balsamic_pon.html#cnvkit-pon">CNVkit PON</a></li>
<li class="toctree-l1"><a class="reference internal" href="balsamic_pon.html#gens-pon">GENS PON</a></li>
<li class="toctree-l1"><a class="reference internal" href="balsamic_methods.html">Method description</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="bioinfo_softwares.html">Tools and software</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">References and other resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Documentation Guidline</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Coding etiquettes</a></li>
<li class="toctree-l1"><a class="reference internal" href="semver.html">Semantic versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQs.html">Frequently Asked Questions (FAQs)</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="coding-etiquettes">
<h1>Coding etiquettes<a class="headerlink" href="#coding-etiquettes" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>Structure the code properly</p></li>
<li><p>Maintain good and consistent naming convention</p></li>
<li><p>Keep it simple</p></li>
<li><p>Don’t repeat yourself</p></li>
</ul>
<section id="git-etiquette">
<h2>Git etiquette<a class="headerlink" href="#git-etiquette" title="Permalink to this heading">#</a></h2>
<section id="code-formatting">
<h3><strong>Code formatting</strong><a class="headerlink" href="#code-formatting" title="Permalink to this heading">#</a></h3>
<p>BALSAMIC is using Black as code formatter: <a class="reference external" href="https://github.com/psf/black">https://github.com/psf/black</a></p>
</section>
<section id="conventional-commits-and-prs">
<h3><strong>Conventional commits and PRs</strong><a class="headerlink" href="#conventional-commits-and-prs" title="Permalink to this heading">#</a></h3>
<p>PRs should follow the following keywords in the title: <a class="reference external" href="https://www.conventionalcommits.org/en/v1.0.0/">https://www.conventionalcommits.org/en/v1.0.0/</a></p>
<p>Commit messages are recommended to following the following similar to PRs:</p>
<ol class="arabic simple">
<li><p><strong>feat</strong>: Introducing a new features. This includes but not limited to workflows, SnakeMake rule, cli, and plugins. In other words, anything that is new and fundamental change will also go here. Enhancements and optimizations will go into refactor.</p></li>
<li><p><strong>fix</strong>: This is essentially a patch. Included but not limited to: bug fixes, hotfixes, and any patch to address a known issue.</p></li>
<li><p><strong>doc</strong>: Any changes to the documentation are part of doc subject line, included but not limited to docstrings, cli-help, readme, tutorial, documentation, CHANGELOG, and addition of ipython/jupyter notebook in the form of tutorial.</p></li>
<li><p><strong>test</strong>: Any changes to the tests are part of test subject line. This includes adding, removing or updating of the following: unittests, validation/verification dataset, and test related configs.</p></li>
<li><p><strong>refactor</strong>: Refactoring refers to a rather broad term. Any style changes, code enhancement, and analysis optimization.</p></li>
<li><p><strong>version</strong>: Any changes to .bumpversion config and or change of version will be specified with this. This includes comments within .bumpversion, structure of .bumpversion, etc.</p></li>
</ol>
</section>
<section id="scope">
<h3><strong>Scope</strong><a class="headerlink" href="#scope" title="Permalink to this heading">#</a></h3>
<p>Scope is specified within parenthesis. It show the <em>scope</em> of the subject line. The following scope are valid:</p>
<ul class="simple">
<li><p>cli</p></li>
<li><p>style</p></li>
<li><p>rule (refers to SnakeMake rules)</p></li>
<li><p>workflow (refer to SnakeMake workflows)</p></li>
<li><p>config (refers to configs that are either used or generated by BALSAMIC)</p></li>
<li><p>Relevant scopes that might fit into a scope description</p></li>
</ul>
<p>Note: If scope is broad or matching with multiple (it shouldn’t, but if it does) one can leave out the scope.</p>
</section>
<section id="message">
<h3><strong>Message</strong><a class="headerlink" href="#message" title="Permalink to this heading">#</a></h3>
<p>It’s better to start Git commit message with the following words:</p>
<ul class="simple">
<li><p>added</p></li>
<li><p>removed</p></li>
<li><p>updated</p></li>
</ul>
</section>
</section>
<section id="snakemake-etiquette">
<h2>Snakemake etiquette<a class="headerlink" href="#snakemake-etiquette" title="Permalink to this heading">#</a></h2>
<p>The bioinformatics core analysis in BALSAMIC is defined by set of rules written as a Snakemake rules (<code class="docutils literal notranslate"><span class="pre">*.rule</span></code>) and Snakemake
workflow as (<code class="docutils literal notranslate"><span class="pre">*.smk</span></code>). Main <code class="docutils literal notranslate"><span class="pre">balsamic.smk</span></code> workflow uses these rules to create sets of output files from sets of input files.
Using <code class="docutils literal notranslate"><span class="pre">{wildcards}</span></code> Snakemake can automatically determine the dependencies between the rules by matching file names. The
following guidelines describe the general conventions for naming and order of the rules, while writing a Snakemake file in
BALSAMIC. For further description of how Snakemake works, please refer to Snakemake official documentation: <a class="reference external" href="https://snakemake.readthedocs.io/">https://snakemake.readthedocs.io/</a></p>
<section id="structure-of-snakemake-rules">
<h3><strong>Structure of Snakemake rules</strong><a class="headerlink" href="#structure-of-snakemake-rules" title="Permalink to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="o">&lt;</span><span class="n">program</span><span class="o">&gt;</span><span class="n">_</span><span class="o">&lt;</span><span class="n">function</span><span class="o">&gt;</span><span class="n">_</span><span class="o">&lt;</span><span class="n">optional_tag</span><span class="o">&gt;</span><span class="n">_</span><span class="o">&lt;</span><span class="n">optional_tag</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="o">&lt;</span><span class="n">named_input_1</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="o">&lt;</span><span class="n">named_input_2</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="o">&lt;</span><span class="n">named_output_1</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">benchmark</span><span class="p">:</span>
        <span class="n">Path</span><span class="p">(</span><span class="n">benchmark_dir</span><span class="p">,</span> <span class="s2">&quot;&lt;rule_name&gt;_&lt;</span><span class="si">{sample}</span><span class="s2">/</span><span class="si">{case_name}</span><span class="s2">&gt;.tsv&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
    <span class="n">singularity</span><span class="p">:</span>
        <span class="n">singularity_image</span>
    <span class="n">params</span><span class="p">:</span>
        <span class="o">&lt;</span><span class="n">named_param_1</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
        <span class="o">&lt;</span><span class="n">named_param_1</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n">threads</span><span class="p">:</span>
        <span class="n">get_threads</span><span class="p">(</span><span class="n">cluster_config</span><span class="p">,</span> <span class="s1">&#39;&lt;rule_name&gt;&#39;</span><span class="p">)</span>
    <span class="n">message</span><span class="p">:</span>
        <span class="p">(</span><span class="s2">&quot;Align fastq files with bwa-mem to reference genome and sort using samtools for sample: </span><span class="si">{sample}</span><span class="s2">&quot;</span>
        <span class="s2">&quot;&lt;second line is allowed to cover more description&gt;&quot;</span><span class="p">)</span>
    <span class="n">shell</span><span class="p">:</span>
<span class="w">         </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &lt;first_command&gt; &lt;options&gt;;</span>

<span class="sd">    &lt;second_command&gt; &lt;options&gt;;</span>

<span class="sd">    &lt;a_long_command&gt; &lt;--option-1&gt; &lt;value_1&gt; \</span>
<span class="sd">    &lt;--option-2&gt; &lt;value_2&gt; \</span>
<span class="sd">    &lt;--option-3&gt; &lt;value_3&gt;;</span>
<span class="sd">        &quot;&quot;&quot;</span>
</pre></div>
</div>
<section id="descriptions">
<h4><strong>Descriptions</strong><a class="headerlink" href="#descriptions" title="Permalink to this heading">#</a></h4>
<p><strong>rulename</strong>: Rule name briefly should outline the program and functions utilized inside the rule. Each word is seperated by a underscore <code class="docutils literal notranslate"><span class="pre">_</span></code>. First word is the bioinformatic tool or script’s name. The following words describe subcommand within that bioinformatic tool and then followed by workflow specific description. The word length shouldn’t exceed more than 3 or 4 words. Make sure rule names are updated within <code class="docutils literal notranslate"><span class="pre">config/cluster.json</span></code> and it is all lowercase. Examples: <code class="docutils literal notranslate"><span class="pre">picard_collecthsmetrics_umi</span></code>, <code class="docutils literal notranslate"><span class="pre">bcftools_query_calculateaftable_umi</span></code></p>
<p><strong>input</strong>: It is strongly recommended to set input and output files as named. Refrain from introducing new wildcards as much as possible.</p>
<p><strong>output</strong>: This should follow the same instructions as <code class="docutils literal notranslate"><span class="pre">input</span></code>.</p>
<p><strong>benchmark</strong>: Benchmark name is prefixed with rule name and suffixed with ‘.tsv’ file extension.</p>
<p><strong>singularity</strong>: Make sure the singularity image does contain a Conda environment with required bioinformatics tools. Do not use this field if <code class="docutils literal notranslate"><span class="pre">run</span></code> is used instead of <code class="docutils literal notranslate"><span class="pre">shell</span></code>.</p>
<p><strong>params</strong>: If the defined parameter is a threshold or globally used constant; add it to <code class="docutils literal notranslate"><span class="pre">utils/constants.py</span></code>. Respective class models need to be updated in <code class="docutils literal notranslate"><span class="pre">utils/models.py</span></code>.</p>
<p><strong>threads</strong>: Make sure for each rule, the correct number of threads are assigned in <code class="docutils literal notranslate"><span class="pre">config/cluster.json</span></code>. Otherwise it will be assigned default values from <code class="docutils literal notranslate"><span class="pre">config/cluster.json</span></code> . If there is no need for multithreading, this field can be removed from rule.</p>
<p><strong>message</strong>: A short message describing the function of rule. Add any relevant wildcard to message to make it readable and understandable. It is also recommended to use <code class="docutils literal notranslate"><span class="pre">params</span></code> to build a more descriptive <code class="docutils literal notranslate"><span class="pre">message</span></code></p>
<p><strong>shell (run)</strong>: Code inside the <cite>shell/run</cite> command should be left indented. Shell lines no longer than 100 characters. Break the long commands with <code class="docutils literal notranslate"><span class="pre">\</span></code> and followed by a new line. Avoid having long Python code within <code class="docutils literal notranslate"><span class="pre">run</span></code>, instead add it to <code class="docutils literal notranslate"><span class="pre">utils/</span></code> as a Python script and import the function.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>java -jar \
-Djava.io.tmpdir=${{tmpdir}} \
-Xms8G -Xmx16G \
$CONDA_PREFIX/share/picard.jar \
MarkDuplicates \
{input.named_input_1} \
{output.named_output_1};
</pre></div>
</div>
<p>Example for external python scripts that can be saved as modules in <code class="docutils literal notranslate"><span class="pre">utils/*.py</span></code> and can use them as definitions in rules as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">BALSAMIC.utils.workflowscripts</span> <span class="kn">import</span> <span class="n">get_densityplot</span>
<span class="n">get_densityplot</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="n">named_input1</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">named_params_1</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">named_output1</span> <span class="p">)</span>
</pre></div>
</div>
<p>Similarly <code class="docutils literal notranslate"><span class="pre">awk</span></code> or <code class="docutils literal notranslate"><span class="pre">R</span></code> external scripts can be saved in <code class="docutils literal notranslate"><span class="pre">assets/scripts/*awk</span></code> and can be invoked using <cite>get_script_path</cite> as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">params</span><span class="p">:</span>
    <span class="n">consensusfilter_script</span> <span class="o">=</span> <span class="n">get_script_path</span><span class="p">(</span><span class="s2">&quot;FilterDuplexUMIconsensus.awk&quot;</span><span class="p">)</span>
<span class="n">shell</span><span class="p">:</span>
<span class="w">     </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">samtools view -h {input} | \</span>
<span class="sd">awk -v MinR={params.minreads} \</span>
<span class="sd">-v OFS=\&#39;\\t\&#39; -f {params.consensusfilter_script} | \</span>
<span class="sd">samtools view -bh - &gt; {output}</span>
<span class="sd">     &quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="references">
<h4><strong>References</strong><a class="headerlink" href="#references" title="Permalink to this heading">#</a></h4>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://snakemake.readthedocs.io/en/stable/snakefiles/rules.html">https://snakemake.readthedocs.io/en/stable/snakefiles/rules.html</a></p></li>
<li><p><a class="reference external" href="https://snakemake.readthedocs.io/en/stable/snakefiles/writing_snakefiles.html">https://snakemake.readthedocs.io/en/stable/snakefiles/writing_snakefiles.html</a></p></li>
</ol>
</section>
</section>
</section>
<section id="container-etiquette">
<h2>Container etiquette<a class="headerlink" href="#container-etiquette" title="Permalink to this heading">#</a></h2>
<p>BALSAMIC uses singularity containers to perform the bioinformatics analysis. These containers are built using Docker and pushed to Docker Hub.
For more details on building containers using docker, please refer to the official docker documentation: <a class="reference external" href="https://docs.docker.com/">https://docs.docker.com/</a></p>
<section id="structure-of-docker-recipe">
<h3><strong>Structure of Docker recipe</strong><a class="headerlink" href="#structure-of-docker-recipe" title="Permalink to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="o">&lt;</span><span class="n">CONTAINER</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">VERSION</span><span class="o">&gt;</span>

<span class="n">LABEL</span> <span class="n">base</span><span class="o">.</span><span class="n">image</span><span class="o">=</span><span class="s2">&quot;&lt;CONTAINER&gt;:&lt;VERSION&gt;&quot;</span>
<span class="n">LABEL</span> <span class="n">maintainer</span><span class="o">=</span><span class="s2">&quot;Clinical Genomics&quot;</span>
<span class="n">LABEL</span> <span class="n">about</span><span class="o">.</span><span class="n">contact</span><span class="o">=</span><span class="s2">&quot;support@clinicalgenomics.se&quot;</span>
<span class="n">LABEL</span> <span class="n">software</span><span class="o">=</span><span class="s2">&quot;&lt;NAME_OF_THE_MAIN_SOFTWARE&gt;&quot;</span>
<span class="n">LABEL</span> <span class="n">software</span><span class="o">.</span><span class="n">version</span><span class="o">=</span><span class="s2">&quot;&lt;VERSION_OF_THE_MAIN_SOFTWARE&gt;&quot;</span>
<span class="n">LABEL</span> <span class="n">about</span><span class="o">.</span><span class="n">summary</span><span class="o">=</span><span class="s2">&quot;&lt;DESCRIPTION_OF_THE_MAIN_SOFTWARE&gt;&quot;</span>
<span class="n">LABEL</span> <span class="n">about</span><span class="o">.</span><span class="n">home</span><span class="o">=</span><span class="s2">&quot;&lt;URL_OF_THE_MAIN_SOFTWARE&gt;&quot;&quot;</span>
<span class="n">LABEL</span> <span class="n">about</span><span class="o">.</span><span class="n">documentation</span><span class="o">=</span><span class="s2">&quot;&lt;DOCS_URL_OF_THE_MAIN_SOFTWARE&gt;&quot;</span>
<span class="n">LABEL</span> <span class="n">about</span><span class="o">.</span><span class="n">license</span><span class="o">=</span><span class="s2">&quot;MIT License (MIT)&quot;</span>

<span class="n">RUN</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="o">-</span><span class="n">y</span> <span class="n">upgrade</span> <span class="o">&amp;&amp;</span> \
    <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">install</span><span class="o">-</span><span class="n">recommends</span> <span class="o">&amp;&amp;</span> \
    <span class="o">&lt;</span><span class="n">SOFTWARE_1</span> <span class="n">SOFTWARE_2</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span> \
    <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">clean</span> <span class="o">&amp;&amp;</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">lists</span><span class="o">/*</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/*</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">tmp</span><span class="o">/*</span>

<span class="n">RUN</span> <span class="o">....</span>

<span class="n">USER</span>    <span class="n">ubuntu</span>
<span class="n">WORKDIR</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ubuntu</span>
<span class="n">CMD</span> <span class="p">[</span><span class="s2">&quot;/bin/bash&quot;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="simple">
<dt>It is preferable to:</dt><dd><ul class="simple">
<li><p>Use official image as the base</p></li>
<li><p>Use Ubuntu-LTS as the base image</p></li>
<li><p>Avoid Conda unless necessary</p></li>
<li><p>Add versions</p></li>
<li><p>Avoid building containers with multiple software used in the rules</p></li>
</ul>
</dd>
</dl>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="semver.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Semantic versioning</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="README.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Documentation Guidline</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Clinical Genomics
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Coding etiquettes</a><ul>
<li><a class="reference internal" href="#git-etiquette">Git etiquette</a><ul>
<li><a class="reference internal" href="#code-formatting"><strong>Code formatting</strong></a></li>
<li><a class="reference internal" href="#conventional-commits-and-prs"><strong>Conventional commits and PRs</strong></a></li>
<li><a class="reference internal" href="#scope"><strong>Scope</strong></a></li>
<li><a class="reference internal" href="#message"><strong>Message</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#snakemake-etiquette">Snakemake etiquette</a><ul>
<li><a class="reference internal" href="#structure-of-snakemake-rules"><strong>Structure of Snakemake rules</strong></a><ul>
<li><a class="reference internal" href="#descriptions"><strong>Descriptions</strong></a></li>
<li><a class="reference internal" href="#references"><strong>References</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#container-etiquette">Container etiquette</a><ul>
<li><a class="reference internal" href="#structure-of-docker-recipe"><strong>Structure of Docker recipe</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>